### **堆 vs. 元数据区对比**

|**特性**|**堆（Heap）**|**元数据区（Metaspace）**|
|---|---|---|
|**存储内容**|对象实例、数组、实例变量|类元数据、运行时常量池、JIT代码|
|**线程共享**|是|是|
|**GC机制**|频繁（Minor GC/Major GC）|较少（类卸载时触发）|
|**内存管理**|JVM堆内存|本地内存（Native Memory）|
|**大小调整**|`-Xms`和`-Xmx`|`-XX:MaxMetaspaceSize`|
|**溢出错误**|`OutOfMemoryError: Java heap space`|`OutOfMemoryError: Metaspace`|

### 字符串存在哪，静态方法和静态变量呢
### **存储位置总结（JDK8+）**

| **内容**         | **存储位置**        | 说明                        |
| -------------- | --------------- | ------------------------- |
| 字符串字面量         | 堆（字符串常量池）       | 如`"abc"`                  |
| `new String()` | 堆（独立对象）         | 与常量池可能共享字面量               |
| 静态变量           | 堆（与Class对象关联）   | 包括基本类型和引用                 |
| 静态变量指向的对象      | 堆               | 如`static Object obj`的实际对象 |
| 静态方法字节码        | 元数据区（Metaspace） | 类元数据的一部分                  |
| 方法调用时的数据       | 线程栈             | 局部变量、操作数栈等                |
